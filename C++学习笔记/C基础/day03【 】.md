#  C语言第三天课程笔记

每一天的笔记包含如下内容:

1. 当天授课内容安排
2. 课堂重点内容笔记
3. 课后思考题



**任务:**

1. 今天内容代码敲完(2遍)，需要推演自己推演一遍。
2. 今天强化训练题。
3. 回顾整体三天学习的内容，xmind 方式。
4. 预习。



## 1. 内容安排

**第一节课:**   `数值溢出`
**第二节课:**   `类型转换`
**第三节课:**   `整型存储原理(原码、反码、补码)`
**第四节课:**   `数据类型总结(printf函数、变量命名规则、类型大小、变量声明和定义、变量和常量、变量初始化问题)`
**第五节课:**   `C语言运算符(算数运算符、比较运算符、赋值运算符、比较运算符、运算符优先级)`
**第六节课:**   `数据强化训练(结转到下一天)`



## 2. 课堂笔记

课堂主要内容、重要内容。



#### 2.1 数值溢出

整型溢出：

1. 当无符号类型，达到上限的话，值会回到原点。如果达到下限，再进行计算，值回到最大值。
2. 当有符号类型，达到上限再+1的话，值会回到最小值。如果达到下限，再减一，值会回到最大值。（编译器行为， C语言只规定无符号类型溢出的规则，对于有符号类型并没有做出规定，当有符号数据溢出时，结果 undefined 未定义）

浮点数溢出:

1. 当浮点数上溢出，编译器会用一个词表示无穷大(vs inf)。
2. 当浮点数下溢出，指数会向尾部部分借位，尾数减少一位。



**练习:**

```c
// 1. 请问 c1 输出的值是多少? 
	unsigned char c1 = CHAR_MAX;
	printf("c1 = %hhu\n", c1 + 1);

	// 2. 请问 c2 输出的值是多少？
	unsigned char c2 = CHAR_MIN;
	printf("c2 = %hhu\n", c2);

	// 3. 请问 c3 输出的值是多少?
	char c3 = UCHAR_MAX;
	printf("c3 = %hhd\n", c3);

	// 4. 请问 s1 输出的值是多少?
	short s1 = CHAR_MAX;
	printf("s1 = %hd\n", s1);

	// 5.     请问 s2 输出的值是多少?
	short s2 = USHRT_MAX;
	printf("s2 = %hd\n", s2);

	// 6. 请问 s3 输出的值是多少?
	unsigned short s3 = SHRT_MAX +1;
	printf("s3 = %hu\n", s3);
```



#### 2.2 类型转换

C语言允许不同数据类型之间进行类型转换。类型转换分为：

1. 自动类型转换.
2. 强制类型转换.

自动类型转换:

**1. 运算中类型转换: **如果两个不同类型之间数据运算，先要将其转换为相同类型，再进行计算。

1. 两个 float 类型会转换为 double 类型再进行运算， 结果也是 double 类型(不同编译器可能有不同规则)
2. long 类型和 int 类型运算，一般会将其转换为 long 类型，再进行运算，结果是 long 类型。
3. 这些转换由系统自动完成。

**2. 赋值中的类型转换:** 把等号右侧的值转换为等号左侧值的类型。

1. 浮点类型转换为整型，会舍弃小数部分。整型转换为浮点类型，值不变，只是将值的形式该成浮点形式。
2. float 转换为 double 类型，在尾部加 0 变成 double 类型。 double 类型转换为 float 类型，舍弃部分精度。
3. char 类型转换为 int 类型，一般仍保留原值(ASCII)。int 转换为 char 类型，高位字节舍弃。
4. int 类型转换为 long 类型，直接转换。long 类型转换为 int 类型则舍弃高位字节。
5. int long 转换为 unsigned 类型

**类型转换结论:**

1. 从代码阅读角度，强制类型转换更加好， 代码表达更加清晰。

2. 从代码控制角度，强制类型转换更加好，我们更加准确的控制不同类型之间的运算。

3. 语法：` (类型名)变量名`

**十六进制和二进制转换:**

<img src="assets/02_二进制和十六进制.jpg" />



**思考: **输入结果是？

```c
void test01()
{
	int n = 0xab65; 
	char a = (char)n;
	printf("a = %d\n", a);
	n = a;
	printf("n = %d\n", n);
}
```



#### 2.3 整型存储(原码反码补码)

1. 负数的反码存储，主要用于解决：正数+负数
2. 负数的补码存储，主要用于解决：负数+负数

整数在内存中都是以补码形式存储。

1. 正数的原码、反码、补码都是本身。
2. 负数的补码是反码+1.

计算过程：

<img src="assets/03_原码_正数+正数.jpg" />

<center><b>原码用于计算正数+正数情况</center></b></center>


<img src="assets/04_原码_正数+负数计算错误.jpg" />

<center><b>原码用于计算正数+负数就会计算错误</center></b></center>
<img src="assets/05_反码_正数+负数.jpg" />



<center><b>补码用于计算负数+负数的情况</center></b></center>



1. char 类型，有些编译器把 char 类型当做 unsigned char, 有些编译器会把 char 当做负数，还有一些编译器正负来用。

2. char 类型最小值是-128，而不是-127的原因。在整型中，0分为+0和-0，-0没有意义，-0在计算机中-128表示。 char c = -128.  10000000.



#### 2.4 数据类型总结

1. %e, 以指数的形式，需要的是 double 类型变量。

2. printf 函数只有碰到 \n 的时候，才会将内容发送到屏幕去显示。在 vs 里，每次系统会帮我们自动刷新，所以不写\n 也可以输出，但是在其他平台可能就不会输出了。

3. 在C语言中，一行可以定义多个变量。例如:`int a=10, b = 20, c= 30;`。

4. 在C语言中定义常量，使用`#define 常量名字 常量值`。 常量和变量区别:

   1. 常量没有内存。
   2. 变量有内存。

5. 变量定义会分配内存，变量声明不会分配内存。有些变量在其他文件中定义，那么如果想在当前文件内使用的话，就必须要先声明，告诉编译器该变量在其他文件定义，不在当前文件，让编译器去其他文件中找变量定义。

   `extern 变量类型 变量名;`

6. char 类型 1字节，最小1字节
   short类型 2字节，最小2字节
   int类型 4字节，最小2字节
   long 类型 4字节，最小4字节
   long long 类型 8字节，最小8字节
   float 类型 精度6-7位，要求6位
   double 类型 精度15-16位，要求10位

#### 2.5 C语言运算符

```c
#if 1
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <stdbool.h>

// 1. 算数运算符
// 常见的算数运算：加、减、乘、除、余数
// 自增(前置、后置)、自减(前置、后置)
// 指数计算、平方根计算
// 左值、右值理解
void test01()
{
	int a = 10;
	int b = 20;

	int ret = a + b;
	ret = a - b;
	ret = a * b;
	
	// 注意: 两个整型相除，结果还是整型
	double dr = (double)a / (double)b;
	printf("dr = %f\n", dr);
	// 取余数、取模
	ret = a % b;
	printf("ret = %d\n", ret);
}

void test02()
{
	int a = 10;
	// a++; //后置++， 先使用，再++, 主要在表达式中
	// ++a;  // 前置++， 先++，再使用

#if 1
	printf("a = %d\n", a++);
	/*
	printf("a = %d\n", a);
	a = a + 1;
	*/
	printf("a = %d\n", a);
#else

	printf("a = %d\n", ++a);
	/*
	a = a + 1;
	printf("a = %d\n", a);
	*/
#endif
}



void test03()
{
	int a = 10;
#if 0
	printf("a = %d\n", a--);
	/*
	printf("a = %d\n", a);
	a = a - 1;
	*/
	printf("a = %d\n", a);
#else
	printf("a = %d\n", --a);
	/*
	a = a- 1;
	printf("a = %d\n", a);
	*/

#endif
}

void test04()
{
	int a = 10;
#if 0
	int b = a++;
	/*
	int b = a;
	a = a + 1;
	*/
#else
	int b = --a;
	/*
	a = a - 1;
	int b = a;
	*/
#endif
	printf("b = %d\n", b);
}

void test05()
{
	double a = 10;
	double b = 2;

	// 求 a 的 b 次方
	double ret = pow(a, b);
	printf("ret = %lf\n", ret);
	// 开根号
	// 如果参数是 double 类型， 使用 sqrt
	// 如果参数是 float 类型， 使用 sqrtf
	// 如果参数是 long double 类型，使用 sqrtl
	double c = sqrt(ret);
	printf("c = %lf\n", c);
}

void test06()
{
	// 能够放在等号左边，被赋值叫做左值
	// 只能放在等号右边，给别人赋值，叫做右值
	// 常量(字面量)只能做右值
	// 变量是左值, 也可以当做右值
	int a = 10;
	int b = a;

}

// 2. 赋值运算符
void test07()
{
	// =号叫做赋值运算符
	// 赋值运算符的运算顺序是从右到左
	int a = 10; 

	a += 3; // a = a + 3;
	a -= 3; // a = a - 3;
	a *= 3; // a = a * 3;
	a /= 3; // a = a / 3;
	a %= 3; // a = a % 3;
}


// 3. 比较运算符
// 3.1 真假的理解(非0的值表示真true，0值表示假false)
// 3.2 C99标准 布尔类型(true, false)  stdbool.h
// 3.3 常用的比较运算符
void test08()
{
	// 使用布尔类型，需要导入头文件 stdbool.h
	// 布尔类型的值只有两个: true、false
	// 编译器支持 C99 标准的话，才能使用 _Bool 类型
	_Bool a = true;
	_Bool b = false;
}

void test09()
{
	int a = 10;
	int b = 20;

	_Bool ret = a > b;
	printf("ret = %d\n", ret);

	ret = a >= b;  // 大于等于
	ret = a < b;  // 小于
	ret = a <= b;  // 小于等于
	ret = a == b;  // 等于
	ret = a != b;  // 不等于

	int rr = a > b;
	// 如果表示真假、建议用 _Bool
	// C程序中，很多地方表示真假的时候用的还是 int 类型， 原因： 只有C99才支持
}


// 4. 逻辑运算符
// 4.1 了解常用逻辑运算符
// 4.2 了解逻辑运算符的运算规则
void test10()
{
	int a = 10;
	int b = 20;
	int c = 30;

	// 1. || 或运算，只要有一个条件为真，则整个条件的结果就为真
	_Bool ret = a < b || c > b; // 假 || 真
	printf("ret = %d\n", ret);

	// 2. && 与运算，条件都为真，则结果为真
	// 运算顺序从左向右，如果某个条件能够决定整个运算结果，编译器不再计算后续表达式
	ret = a > b && c > b && a < c;  // 假 && 真 = 假
	printf("ret = %d\n", ret);

	// 3. ! 非
	ret =  !(a > b);
	printf("ret = %d\n", ret);

	ret = !a;
	printf("ret = %d\n", ret);

}


void test11()
{
	int a = 10;
	int b = 20;
	int c = 30;

	_Bool ret = a > b && (c > b && a < c);  // 假 && 真 = 假
	printf("ret = %d\n", ret);

	int ret = (a + b) * c;
}

int main(int argc, char *argv[])
{
	test10();


	system("pause");
}
#endif
```

#### 2.6 数据强化训练

1. 对下面的各种数据使用合适的数据类型?

   a. 保存北京的人口 

   b. 保存员工的工资 

   c. 保存当前文档中出现次数最多的字母

   d. 保存当前文档中某个字母的出现次数

2. 说出下列值的类型?

   a. '\t'

   b. 1088

   c. 88.66

   d. 0xAA

   e. 3.14f

   f. 2.0e+30

3. 请说出下列程序中有哪些错误?

   ```c
   include <stdio.h>
   
   main()
   (
     float g; h;
     float tax, rate;
     g = e12;
     tax = rate * g;
   )
   ```

   



1. 指出表中各个常量的数据类型，以及在 printf 输出中的占位符:

   | 常量    | 说明符 | 类型 |
   | ------- | ------ | ---- |
   | 12      |        |      |
   | 0x3     |        |      |
   | 'B'     |        |      |
   | 2.34e07 |        |      |
   | '\040'  |        |      |
   | 7.0     |        |      |
   | 6L      |        |      |
   | 6.0f    |        |      |
   | 012     |        |      |
   | 's'     |        |      |
   | 100000  |        |      |
   | '\n'    |        |      |
   | 20.0f   |        |      |
   | 0x44    |        |      |
   | 2.7e-20 |        |      |

2. 假设 ch 为 char 类型变量，使用转义字符、十进制、八进制、十六进制等方式将其赋值为换行符。

   ```c
   
   ```

   

3. 说出下列转义字符的含义:

   a. \\r

   b. \\\

   c. \\*

   d. \\t

   e. %%

4. 编写程序，要求输入一个 ASCII 码值(如：66), 输出相应字符。

   ```c
   
   ```

   

5. 编写程序，发出警报声，并打印下列文字：

   ```c
   警报声已经响起，请自觉遵守规则.
   ```

   ```c
   
   ```

   

6. 编写程序，输入一个浮点数，并分别以小数形式和指数形式打印，输出如同下面格式:

   ```c
   您输入的是: 21.290000，指数形式为: 2.129000e001。
   ```

   ```c
   
   ```

   

7. 一年约有 3.156 x 10<sup>7</sup> 秒, 编写程序，要求输入年龄，然后显示该年龄有多少秒?

   ```c
   
   ```

   

8. 一英寸等于 2.54 厘米, 编写程序，输入您的身高，然后显示身高值等于多少厘米？

   ```c
   
   ```

   

9. 下面那几个是 C 的关键字：

   a. main

   b. int

   c. function

   d. char

   e. =

10. 编写程序，创建一个名为 toes 的整数变量，并设置初始值为 10，计算两个 toes 的和、toes 的平方值，并输出这三个值。

   ```c
   
   ```

   






















